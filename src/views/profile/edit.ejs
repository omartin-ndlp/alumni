<div class="container-fluid">
    <h1 class="mb-4">Modifier mon profil</h1>

    <% if (error) { %>
    <div class="alert alert-danger" role="alert">
        <%= error %>
    </div>
    <% } %>

    <div class="card mb-4">
        <div class="card-body">
            <form action="/profile/edit" method="POST" enctype="multipart/form-data">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="prenom" class="form-label">Prénom</label>
                        <input type="text" class="form-control" id="prenom" name="prenom" value="<%= user.prenom %>" required>
                    </div>
                    <div class="col-md-6">
                        <label for="nom" class="form-label">Nom</label>
                        <input type="text" class="form-control" id="nom" name="nom" value="<%= user.nom %>" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email" value="<%= user.email %>" disabled>
                        <small class="form-text text-muted">L'email ne peut pas être modifié ici.</small>
                    </div>
                    <div class="col-md-6">
                        <label for="annee_diplome" class="form-label">Année de diplôme</label>
                        <input type="number" class="form-control" id="annee_diplome" name="annee_diplome" value="<%= user.annee_diplome %>" disabled>
                        <small class="form-text text-muted">L'année de diplôme ne peut pas être modifiée ici.</small>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="section_id" class="form-label">Section</label>
                        <select class="form-select" id="section_id" name="section_id" disabled>
                            <% sections.forEach(section => { %>
                                <option value="<%= section.id %>" <%= user.section_id == section.id ? 'selected' : '' %>><%= section.nom %></option>
                            <% }); %>
                        </select>
                        <small class="form-text text-muted">La section ne peut pas être modifiée ici.</small>
                    </div>
                    <div class="col-md-6">
                        <label for="telephone" class="form-label">Téléphone</label>
                        <input type="tel" class="form-control" id="telephone" name="telephone" value="<%= user.telephone || '' %>">
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="adresse" class="form-label">Adresse</label>
                        <input type="text" class="form-control" id="adresse" name="adresse" value="<%= user.adresse || '' %>">
                    </div>
                    <div class="col-md-6">
                        <label for="ville" class="form-label">Ville</label>
                        <input type="text" class="form-control" id="ville" name="ville" value="<%= user.ville || '' %>">
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="code_postal" class="form-label">Code Postal</label>
                        <input type="text" class="form-control" id="code_postal" name="code_postal" value="<%= user.code_postal || '' %>">
                    </div>
                    <div class="col-md-6">
                        <label for="pays" class="form-label">Pays</label>
                        <input type="text" class="form-control" id="pays" name="pays" value="<%= user.pays || 'France' %>">
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="linkedin" class="form-label">LinkedIn URL</label>
                        <input type="url" class="form-control" id="linkedin" name="linkedin" value="<%= user.linkedin || '' %>">
                    </div>
                    <div class="col-md-6">
                        <label for="twitter" class="form-label">Twitter URL</label>
                        <input type="url" class="form-control" id="twitter" name="twitter" value="<%= user.twitter || '' %>">
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="facebook" class="form-label">Facebook URL</label>
                        <input type="url" class="form-control" id="facebook" name="facebook" value="<%= user.facebook || '' %>">
                    </div>
                    <div class="col-md-6">
                        <label for="site_web" class="form-label">Site Web URL</label>
                        <input type="url" class="form-control" id="site_web" name="site_web" value="<%= user.site_web || '' %>">
                    </div>
                </div>

                <div class="mb-3">
                    <label for="statut_emploi" class="form-label">Statut d'emploi</label>
                    <select class="form-select" id="statut_emploi" name="statut_emploi">
                        <option value="" <%= !user.statut_emploi ? 'selected' : '' %>>Non spécifié</option>
                        <option value="employed" <%= user.statut_emploi == 'employed' ? 'selected' : '' %>>Employé</option>
                        <option value="unemployed" <%= user.statut_emploi == 'unemployed' ? 'selected' : '' %>>Sans emploi</option>
                        <option value="student" <%= user.statut_emploi == 'student' ? 'selected' : '' %>>Étudiant</option>
                        <option value="retired" <%= user.statut_emploi == 'retired' ? 'selected' : '' %>>Retraité</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
            </form>
        </div>
    </div>
</div>